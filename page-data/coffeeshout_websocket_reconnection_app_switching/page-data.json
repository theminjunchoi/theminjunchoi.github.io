{"componentChunkName":"component---src-templates-post-jsx","path":"/coffeeshout_websocket_reconnection_app_switching/","result":{"data":{"site":{"siteMetadata":{"title":"minjun.blog"}},"markdownRemark":{"id":"e97246be-857f-59db-8b03-b350f11fa429","excerpt":"문제 상황 mvp를 빠르게 만들고 테스트를 하던 중, 다른 앱을 사용하다가 다시 돌아오면 웹소켓 통신이 안된다는 것을 발견했다. 찾아보니 모바일이든 pc의 각각의 기기에서 앱을 전환할 때 환경에 맞게 백그라운드에서 웹소켓을 연결하는 시간이 달랐고, 테스트를 결과 아이폰이나 맥북 기준 대부분 4~5초이내인 것 같다. 클라이언트 코드를 보면, 백그라운드 감지…","html":"<h2>문제 상황</h2>\n<p>mvp를 빠르게 만들고 테스트를 하던 중, 다른 앱을 사용하다가 다시 돌아오면 웹소켓 통신이 안된다는 것을 발견했다.</p>\n<p>찾아보니 모바일이든 pc의 각각의 기기에서 앱을 전환할 때 환경에 맞게 백그라운드에서 웹소켓을 연결하는 시간이 달랐고, 테스트를 결과 아이폰이나 맥북 기준 대부분 4~5초이내인 것 같다.</p>\n<p>클라이언트 코드를 보면, 백그라운드 감지 로직이 없었다.\n그래서 OS에 의해 웹소켓이 연결 해제되면, 감지조차 못하기 때문에 재연결 시도 로직이 없었다.</p>\n<p>그리고 이렇게 구독이 해제되면, <code class=\"language-text\">SimpleBrokerMessageHandler</code>의 <code class=\"language-text\">SubscriptionRegistry</code>에 저장되어있던 구독정보가 자동으로 제거되기 때문에 서버가 클라이언트에게 메시지를 보낼 수 없게 된다.</p>\n<h2>클라이언트 코드에서만 재연결을 추가해주면?</h2>","frontmatter":{"title":"WebSocket Reconnection on App Switching","date":"2025년 08월 13일 09:08","updated":"2025년 08월 13일 14:08","tags":["우아한테크코스","CoffeeShout"],"series":"커피빵(CoffeeShout) 개발록"},"fields":{"slug":"/coffeeshout_websocket_reconnection_app_switching/","readingTime":{"minutes":1.335}}},"seriesList":{"edges":[{"node":{"id":"78009f4c-9d4d-5ede-8df8-21c4b3e0827a","fields":{"slug":"/coffeeshout_ideation/"},"frontmatter":{"title":"커피빵(CoffeeShout) 기획"}}},{"node":{"id":"4b6f5513-eb5e-5e14-9f1e-49e5551e3e0a","fields":{"slug":"/coffeeshout_persona/"},"frontmatter":{"title":"커피빵(CoffeeShout) 페르소나"}}},{"node":{"id":"dfcf707f-6928-5b1d-b1f6-d48ea4b28c21","fields":{"slug":"/coffeeshout_server_tech_stack/"},"frontmatter":{"title":"커피빵(CoffeeShout) 서버 기술스택"}}},{"node":{"id":"e97246be-857f-59db-8b03-b350f11fa429","fields":{"slug":"/coffeeshout_websocket_reconnection_app_switching/"},"frontmatter":{"title":"WebSocket Reconnection on App Switching"}}}]},"previous":{"fields":{"slug":"/how-spring-handle-websocket/"},"frontmatter":{"title":"How Spring Handle WebSocket"}},"next":null},"pageContext":{"id":"e97246be-857f-59db-8b03-b350f11fa429","series":"커피빵(CoffeeShout) 개발록","previousPostId":"0822585b-79bf-5ce3-b125-90763fa797cf","nextPostId":null}},"staticQueryHashes":[],"slicesMap":{}}